package tests;

public class E2ECheckoutTest {

	public static void main(String[] args) {
		package tests;

		import org.testng.Assert;
		import org.testng.annotations.Test;
		import pages.HomePage;
		import pages.ProductPage;
		import pages.CartPage;
		import pages.CheckoutPage;
		import utils.DriverFactory;

		public class E2ECheckoutTest {

		    @Test
		    public void endToEndCheckoutFlow() {
		        var driver = DriverFactory.getDriver();

		        try {
		            HomePage home = new HomePage(driver);
		            ProductPage product = new ProductPage(driver);
		            CartPage cart = new CartPage(driver);
		            CheckoutPage checkout = new CheckoutPage(driver);

		            home.goToHomePage();
		            home.searchProduct("Laptop");

		            product.selectFirstProduct();
		            product.addToCart();

		            cart.proceedToCheckout();

		            checkout.fillAddress("John Doe", "123 Street", "New York", "10001");
		            checkout.placeOrder();

		            String confirmationMsg = checkout.getSuccessMessage();
		            Assert.assertTrue(confirmationMsg.contains("Order Placed"));

		        } finally {
		            DriverFactory.quitDriver();
		        }
		    }
		}


	}

}
