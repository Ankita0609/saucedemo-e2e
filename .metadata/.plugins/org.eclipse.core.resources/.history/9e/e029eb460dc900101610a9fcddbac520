package tests;

import base.BaseTest;

import org.openqa.selenium.WebDriver;
import org.testng.Assert;
import org.testng.annotations.Test;
import pages.HomePage;
import pages.ProductPage;
import pages.CartPage;
import pages.CheckoutPage;
import utils.ConfigReader;

public class E2ECheckoutTest extends BaseTest {

    @SuppressWarnings("null")
	@Test
    public void verifyEndToEndCheckoutFlow() {

        WebDriver driver = null;
		// 1. Navigate to home page
        driver.get(ConfigReader.get("baseUrl"));

        HomePage home = new HomePage(driver);
        ProductPage product = new ProductPage(driver);
        CartPage cart = new CartPage(driver);
        CheckoutPage checkout = new CheckoutPage(driver);

        // 2. Search for a product
        home.searchProduct("Laptop");

        // 3. Select the first product from results
        product.selectFirstProduct();

        // 4. Add to cart
        product.addToCart();

        // 5. Proceed to checkout
        cart.proceedToCheckout();

        // 6. Fill checkout details
        checkout.fillAddress(
                "John Doe",
                "221B Baker Street",
                "London",
                "NW16XE"
        );

        // 7. Place the order
        checkout.placeOrder();

        // 8. Validate order success message
        String message = checkout.getSuccessMessage();
        Assert.assertTrue(message.contains("Order Placed"),
                "Expected order confirmation message but got: " + message);

        System.out.println("End-to-End checkout flow executed successfully.");
    }
}
